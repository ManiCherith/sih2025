// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" 
  url      = env("DATABASE_URL")
}

model User {
  id           String    @id @default(cuid())
  email        String    @unique
  passwordHash String
  role         String    @default("citizen")
  createdAt    DateTime  @default(now())
  issues       Issue[]
}

model Issue {
  id                    String   @id @default(uuid()) 
  title                 String
  category              String
  description           String
  location              String
  priority              String
  coordinates           Json? 
  userId                String
  submittedBy           String
  photoPath             String?
  status                String   @default("submitted") 
  assignedTo            String?  
  resolutionPhotoPath   String? 
  upvotes               Int      @default(0) 
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt 
  resolvedAt            DateTime?


  user User @relation(fields: [userId], references: [id])
}
